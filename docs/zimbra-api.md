## Step1. Tích hợp zimbra-api trên 

Sử dụng zimbra-api (viết bằng PHP)

Download tại: [https://github.com/zimbra-api/zimbra-api](https://github.com/zimbra-api/zimbra-api)

- Install PHP with cURL

```
sudo yum install epel-release -y
sudo rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
yum install -y php72w php72w-common php72w-cli php72w-fpm curl
```

- Install Composer

`curl -sS https://getcomposer.org/installer | php`

- Create composer.json

```
mkdir /var/www/html/zimbra && cd /var/www/html/zimbra
cat >composer.json<<EOF
{
    "require": {
        "zimbra-api/soap-api": "*",
        "guzzlehttp/guzzle": "^6.3",
        "evenement/evenement": "^3.0 || ^2.0"
    }
}
EOF
```

Khi đó cài đặt cái gói dependencies như sau:

`php composer.phar install`

## Step2: Test for usage zimbra-api admin client

- Tạo tệp index.php với nội dung sau

```
<?php

// This file is generated by Composer
require_once 'vendor/autoload.php';

$api = \Zimbra\Admin\AdminFactory::instance('https://localhost:7071/service/admin/soap');
$api->auth('username', 'password');
$account = new \Zimbra\Struct\AccountSelector(\Zimbra\Enum\AccountBy::NAME(), 'username');
$accountInfo = $api->getAccountInfo($account);
var_dump("$account");
?>
```

Mục đích của tệp tin này là lấy thông tin của tài khoản mail và in ra màn hình.

Thay giá trị mail server "localhost" với địa chỉ mail server cụ thể (ví dụ: `mail.example.com`)

Thay giá trị `username/password` với tài khoản quản trị có quyền trên Zimbra. Ví dụ: `admin/P@ssw0rd`

Thay giá trị mà biến $account sẽ nhận thông tin email `keepwalking86@example.com`

Khi đó tệp tin cụ thể như sau:

```
<?php

// This file is generated by Composer
require_once 'vendor/autoload.php';

$api = \Zimbra\Admin\AdminFactory::instance('https://mail.example.com:7071/service/admin/soap');
$api->auth('admin', 'P@ssw0rd');
$account = new \Zimbra\Struct\AccountSelector(\Zimbra\Enum\AccountBy::NAME(), 'keepwalking86@example.com');
$accountInfo = $api->getAccountInfo($account);
var_dump("$account");
?>
```

- Test thử bằng curl

```
curl http://localhost:9999/
string(71) "<?xml version="1.0"?>
<account by="name">keepwalking86@example.com</account>
"
```

- All command for API

[https://files.zimbra.com/docs/soap_api/8.8.8/api-reference/allcommands-frame.html](https://files.zimbra.com/docs/soap_api/8.8.8/api-reference/allcommands-frame.html)
